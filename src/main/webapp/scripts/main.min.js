function pageLocale(a){return void 0===a?$("body").attr("locale")||"zh-CN":void $("body").attr("locale",a)}function capitaliseFirstLetter(a){return a.charAt(0).toUpperCase()+a.slice(1)}function isString(a){return"string"==typeof a||a instanceof String}function getFunction(a,b){b=b||_self;for(var c=a.split("."),d=0;d<c.length;d++)if(b=b(c[d]),void 0==b)throw"Function is undefined:"+a;return b}function integer(a){var b=parseInt(a,10);return isNaN(b)?null:b}function float(a){var b=parseFloat(a);return isNaN(b)?null:b}function hitch(a,b){if(b||(b=a,a=null),isString(b)){if(a=a||_self,!a[b])throw['hitch: scope["',b,'"] is null (scope="',a,'")'].join("");return function(){return a[b].apply(a,arguments||[])}}return a?function(){return b.apply(a,arguments||[])}:b}function getObject(a,b){b=b||_self;for(var c,d=a.split("."),e=0;b&&(c=d[e]);e++)b=c in b?b[c]:void 0;return b}function setObject(a,b,c){c=c||_self;for(var d,e=a.split("."),f=e.pop(),g=0;c&&(d=e[g]);g++)c=d in c?c[d]:c[d]={};return c&&f?c[f]=b:void 0}function debounce(a,b,c){var d,e;return function(){var f=arguments,g=function(){d=null,c||(e=a(f))},h=c&&!d;return clearTimeout(d),d=setTimeout(g,b),h&&(e=a(f)),e}}function tURL(a,b){b=b||"timeflag";var c=(new Date).getTime(),d=new RegExp(b+"=\\d{13}");return a.indexOf(b+"=")>=0?a=a.replace(d,b+"="+c.toString()):(a+=/\?/.test(a)?"&":"?",a+b+"="+c.toString())}function encURL(a,b){var c=a.indexOf("?");if(-1===c)return b?tURL(a,b):a;for(var d=a.substring(0,c+1),e=a.substring(c+1).split("&"),f=0;f<e.length;f++){f>0&&(d+="&");var g=e[f].split("=");d+=g[0]+"="+encodeURIComponent(g[1])}return b?tURL(d,b):d}function ajaxFormToObj(a){function b(a,b,c){if(null!==c){var d=a[b];isString(d)?a[b]=[d,c]:$.isArray(d)?a[b].push(c):a[b]=c}}function c(a){var b=null,c=(a.type||"").toLowerCase();return a.name&&c&&!a.disabled&&("radio"===c||"checkbox"===c?a.checked&&(b=a.value):a.multiple?(b=[],$("option",a).each(function(){this.selected&&b.push(this.value)})):b=a.value),b}if(!a)return{};a=isString(a)?$("#"+a).get(0):a;var d={},e="file|submit|image|reset|button|";return $.each(a.elements,function(a,f){var g=f.name,h=(f.type||"").toLowerCase();g&&h&&-1===e.indexOf(h)&&!f.disabled&&b(d,g,c(f))}),d}function _ajaxOptions(a,b,c){var d={};return 1===arguments.length?d=a:(d=c||{},d.url=a,b&&(isString(b)?$.extend(d,{data:ajaxFormToObj(b)}):$.extend(d,{data:b}))),d}function asyncXhr(a,b,c){return $.ajax(_ajaxOptions(a,b,c))}function asyncXhrGet(a,b,c){return $.ajax($.extend({type:"GET"},_ajaxOptions(a,b,c)))}function asyncXhrPost(a,b,c){return $.ajax($.extend({type:"POST"},_ajaxOptions(a,b,c)))}function syncXhr(a,b,c){var d,e=_ajaxOptions(a,b,c);return $.extend(e,{async:!1,success:function(a){d=a},error:function(a,b,c){d={};var e={};e.message="Error occurs when fetching data from url:"+this.url,e.cause=b?b:c,d.exception=e}}),$.ajax(e),d}function syncXhrGet(a,b,c){return 1===arguments.length?a.type="GET":c=$.extend({},c,{type:"GET"}),syncXhr(a,b,c)}function syncXhrPost(a,b,c){return 1===arguments.length?a.type="POST":c=$.extend({},c,{type:"POST"}),this.syncXhr(a,b,c)}!function(a){var b=this;this.wms={readyfunc:[],i18nResources:{},defaultErrors:{"e-1":"error-message-sys-1","e-4":"error-message-sys-4","e-5":"error-message-sys-5","e-403":"error-message-sys-403","e-404":"error-message-sys-404","e-500":"error-message-sys-500"},addReadyFunc:function(a){isString(a)&&(a=getFunction(a)),this.readyfunc.push(a)},documentReady:function(){for(var a=0;a<this.readyfunc.length;a++)this.readyfunc[a]()},addResource:function(b,c){c&&(wms.i18nResources[b]?a.extend(wms.i18nResources[b].translation,c):wms.i18nResources[b]={translation:c})},encodeURL:function(a,b){return void 0==b||b?encURL(a,"tt"):encURL(a)},async:function(b,c,d,e){var f=_ajaxOptions(b,c,d);a.extend(f,{success:function(a,b,c){a&&a.exception?wms.defaultErrors["e-"+a.exception.statusCode]?wms.frame.notifyError(a.exception.message||i18n.t(wms.defaultErrors["e-"+a.exception.statusCode])):wms.frame.notifyWarning(a.exception.message):this.successHandler?hitch(this,"successHandler")(a,b,c):console.log("no handler defined for success")},error:function(a,b,c){if(this.errorHandler)hitch(this,"errorHandler")(a,b,c);else switch(a.status){case 403:wms.frame.notifyError(i18n.t("error-message-sys-403"));break;case 404:wms.frame.notifyError(i18n.t("error-message-sys-404"));break;default:wms.frame.notifyError(i18n.t("error-message-sys-500"))}}}),e&&(f.type=e),a.ajax(f)},asyncGet:function(a,b,c){this.async(a,b,c,"GET")},asyncPost:function(a,b,c){this.async(a,b,c,"POST")},initTable:function(c){if(void 0==window.Sortable)return void console.log("Sortable is not loaded");var d=window.Sortable;c=c||document,a(c).find("table[data-sortable]").each(function(){function c(a,b){if(0==b)return[];var c=a-2,d=a+2;c=c>0?c:1,d=d>b?b:d;for(var e=[],f=c;d>=f;f++)e.push(f);return e}var e=a(this),f=a(this).parent();d.initTable(this);var g=a('<div class="row table-bottom-bar"><div class="col-md-6 table-bottom-bar-left"></div><div class="col-md-6 table-bottom-bar-right"></div></div>').appendTo(f);if(e.find("th[data-batch]").length>0){var h=e.find("th[data-batch]"),i=a('<div class="btn-group"><button type="button" class="btn btn-default btn-sm dropdown-toggle" data-toggle="dropdown" aria-expanded="true"><i class="icon-down-open"></i></button><ul class="dropdown-menu" role="menu"><li><a class="btn-selectall" href="javascript:void(0);"><i class="icon-check-1"></i> '+i18n.t("sortable-select-all")+'</a></li><li><a class="btn-deselectall" href="javascript:void(0);"><i class="icon-check-empty"></i> '+i18n.t("sortable-unselect-all")+"</a></li></ul></div>").appendTo(h),j=a('<div class="btn-group btn-group-sm dropup"><button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-expanded="true"><i class="icon-list"></i>'+i18n.t("sortable-batch-action")+'</button><ul class="dropdown-menu" role="menu"><li><a class="btn-selectall" href="javascript:void(0);"><i class="icon-check-1"></i> '+i18n.t("sortable-select-all")+'</a></li><li><a class="btn-deselectall" href="javascript:void(0);"><i class="icon-check-empty"></i> '+i18n.t("sortable-unselect-all")+"</a></li></ul></div>").appendTo(g.find(".table-bottom-bar-left"));if(h.data("extra-batch")&&b[h.data("extra-batch")]){var k=b[h.data("extra-batch")];if(a.isArray(k)&&k.length>0){i.find("ul").append('<li class="divider"></li>'),j.find("ul").append('<li class="divider"></li>');for(var l=0;l<k.length;l++){var m=k[l];i.find("ul").append('<li><a class="btn-extra" href="javascript:void(0);"><i class="'+m.icon+'"></i> '+i18n.t(m.name)+"</a></li></ul></div>"),j.find("ul").append('<li><a class="btn-extra" href="javascript:void(0);"><i class="'+m.icon+'"></i> '+i18n.t(m.name)+"</a></li></ul></div>")}i.find(".btn-extra").each(function(b){a(this).click(function(){var c=[];e.find("tr").each(function(){a("td:eq(0) input[type='checkbox']:checked",a(this)).each(function(){c.push(this)})}),k[b].action(c)})}),j.find(".btn-extra").each(function(b){a(this).click(function(){var c=[];e.find("tr").each(function(){a("td:eq(0) input[type='checkbox']:checked",a(this)).each(function(){c.push(this)})}),k[b].action(c)})})}}i.find(".btn-selectall").click(function(){e.find("tr").each(function(){a("td:eq(0) input[type='checkbox']",a(this)).each(function(){a(this).iCheck("check")})})}),i.find(".btn-deselectall").click(function(){e.find("tr").each(function(){a("td:eq(0) input[type='checkbox']",a(this)).each(function(){a(this).iCheck("uncheck")})})}),j.find(".btn-selectall").click(function(){e.find("tr").each(function(){a("td:eq(0) input[type='checkbox']",a(this)).each(function(){a(this).iCheck("check")})})}),j.find(".btn-deselectall").click(function(){e.find("tr").each(function(){a("td:eq(0) input[type='checkbox']",a(this)).each(function(){a(this).iCheck("uncheck")})})}),e.find("tr").each(function(){a("td:eq(0) input[type='checkbox']",a(this)).on("ifChanged",function(b){var c=b.target,d=a(c).is(":checked");d?e.trigger("rowselected.sortable",[c,a(c).parents("tr")]):e.trigger("rowunselected.sortable",[c,a(c).parents("tr")])})})}if(e.data("page")&&"server"==e.data("sortable-type")){var n=integer(e.data("page")),o=integer(e.data("page-count")),p=integer(e.data("count")),q=c(n,o);if(o>1){var r=a('<div class="toolbar-btn-action"><div class="pager btn-group btn-group-sm"></div></div>').appendTo(g.find(".table-bottom-bar-right")),s=r.find("div.pager"),t=1==n,u=n==o,v=t?1:n-1,w=u?o:n+1;s.append('<button data-original-title="'+i18n.t("pager-first")+'" data-toggle="tooltip" data-page="1" type="button" class="btn btn-default btn-page-first"><i class="icon-angle-double-left"></i></button>'),s.append('<button data-original-title="'+i18n.t("pager-prev")+'" data-toggle="tooltip" data-page="'+v+'" type="button" class="btn btn-default btn-page-prev"><i class="icon-left-open"></i></button>');for(var l=0;l<q.length;l++)s.append('<button data-original-title="'+q[l]+'" data-toggle="tooltip" data-page="'+q[l]+'" type="button" class="btn btn-default btn-page-'+q[l]+'">'+q[l]+"</button>");s.append('<button data-original-title="'+i18n.t("pager-next")+'" data-toggle="tooltip" data-page="'+w+'" type="button" class="btn btn-default btn-page-next"><i class="icon-right-open"></i></button>'),s.append('<button data-original-title="'+i18n.t("pager-last")+'" data-toggle="tooltip" data-page="'+o+'" type="button" class="btn btn-default btn-page-last"><i class="icon-angle-double-right"></i></button>'),r.prepend('<span class="page-indicator">'+n+"/"+o+(p?"("+p+")":"")+"</span>"),r.find(".btn-page-"+n).addClass("active"),t&&(s.find(".btn-page-first").addClass("disabled"),s.find(".btn-page-prev").addClass("disabled")),u&&(s.find(".btn-page-next").addClass("disabled"),s.find(".btn-page-last").addClass("disabled")),s.find(".btn[data-page]").click(function(b){if(a(this).hasClass("active"))return void b.preventDefault();var c=e.data("form");if(c){var d=a("#"+c);d.find("input[name='page']").val(a(this).data("page")),d.submit()}else e.trigger("pagechanged.sortable",a(this).data("page"))})}}e.on("sort.sortable",function(b,c,d){function e(b,c){var d="ascending"==c?"asc":"desc",e="sort-name-"+d,f=a(b).data(e);return f||(f=a(b).data("sort-name")||"",f&&(f=f+" "+d)),f}var f=a(this).data("form"),g=e(c,d);if(f){var h=a("#"+f);h.find("input[name='sort']").val(g),h.find("input[name='sortDirection']").val(a(c).data("sort-name")+"@"+d),h.submit()}else a(this).trigger("sortchanged.sortable",[g,a(c).data("sort-name")+"@"+d])})})}},wms.addResource("zh-CN",{"error-message-sys-1":"系统异常，请稍候再试或联系系统管理员","error-message-sys-4":"数据绑定异常","error-message-sys-5":"数据验证失败，请检查输入后重试","error-message-sys-403":"您无权访问，请联系系统管理员","error-message-sys-404":"请求页面未找到","error-message-sys-500":"系统异常，请稍候再试或联系系统管理员","pager-first":"第一页","pager-last":"末页","pager-prev":"前一页","pager-next":"后一页","sortable-select-all":"全选","sortable-unselect-all":"取消选择","sortable-batch-action":"批量操作"}),a(document).ready(function(){if(pageRes=b.pageI18nResources)for(key in pageRes)wms.addResource(key,pageRes[key]);i18n.init({lng:pageLocale(),resStore:wms.i18nResources}),bootbox.setDefaults({locale:pageLocale().replace("-","_")}),b.loadMenu&&b.loadMenu(),FastClick.attach(document.body),a(".animate-number").each(function(){a(this).animateNumbers(a(this).attr("data-value"),!0,parseInt(a(this).attr("data-duration")))}),a(".selectpicker").selectpicker(),a("input[type=file]").fileinput(),a(".datepicker-input").datepicker(),a(".ios-switch").each(function(){mySwitch=new Switch(this)}),a("select[multiple='multiple']").multiSelect(),a("body").tooltip({selector:"[data-toggle=tooltip]",container:"body"}),a(".input-group.date").each(function(){var b=a(this).data("min"),c=a(this).data("max"),d={format:"yyyy-mm-dd",weekStart:1,clearBtn:!0,language:pageLocale(),autoclose:!0,todayHighlight:!0};b&&(d.startDate=b),c&&(d.endDate=c),a(this).datepicker(d)}),a(".input-group.datetime").each(function(){var b=a(this).data("min"),c=a(this).data("max"),d={format:"YYYY-MM-DD HH:mm",showClear:!0,locale:pageLocale(),widgetPositioning:{horizontal:"left"}};b&&(d.minDate=b),c&&(d.maxDate=c),a(this).datetimepicker(d);var e=this;a(this).find("input").on("focus",function(){a(e).data("DateTimePicker").show()})}),wms.initTable(),wms.documentReady(),a("input:not(.ios-switch)").iCheck({checkboxClass:"icheckbox_square-aero",radioClass:"iradio_square-aero",increaseArea:"20%"})});var c=wms.frame={w:0,h:0,dw:0,dh:0,resizefunc:[],notifyOptions:{style:"metro",hideAnimation:"fadeOut",showDuration:0,hideDuration:1e3,autoHideDelay:15e3,autoHide:!0,clickToHide:!0},addResizeFunc:function(a){return isString(a)&&(a=getFunction(a)),this.resizefunc.push(a),this},afterResize:function(){for(var a=0;a<c.resizefunc.length;a++)c.resizefunc[a]()},initscrolls:function(){jQuery.browser.mobile!==!0&&(a(".slimscroller").slimscroll({height:"auto",size:"5px"}),a(".slimscrollleft").slimScroll({height:"auto",position:"left",size:"5px",color:"#7A868F"}))},togglescroll:function(b){a("#wrapper").hasClass("enlarged")?(a(b).css("overflow","inherit").parent().css("overflow","inherit"),a(b).siblings(".slimScrollBar").css("visibility","hidden")):(a(b).css("overflow","hidden").parent().css("overflow","hidden"),a(b).siblings(".slimScrollBar").css("visibility","visible"))},frameChange:function(){c.w=a(window).width(),c.h=a(window).height(),c.dw=a(document).width(),c.dh=a(document).height(),jQuery.browser.mobile===!0&&a("body").addClass("mobile").removeClass("fixed-left"),a("#wrapper").hasClass("forced")||(c.w>990?(a("body").removeClass("smallscreen").addClass("widescreen"),a("#wrapper").removeClass("enlarged")):(a("body").removeClass("widescreen").addClass("smallscreen"),a("#wrapper").addClass("enlarged"),a(".left ul").removeAttr("style")),a("#wrapper").hasClass("enlarged")&&a("body").hasClass("fixed-left")?a("body").removeClass("fixed-left").addClass("fixed-left-void"):!a("#wrapper").hasClass("enlarged")&&a("body").hasClass("fixed-left-void")&&a("body").removeClass("fixed-left-void").addClass("fixed-left")),c.togglescroll(".slimscrollleft")},niftyAlert:function(b,c,d){var e=String.fromCharCode(65+Math.floor(26*Math.random())),f=e+Date.now();return $modal='<div class="md-modal '+b+'" id="'+f+'">',$modal+='<div class="md-content">',$modal+="<h3>"+c+"</h3>",$modal+='<div class="md-modal-body">'+d,$modal+="</div>",$modal+="</div>",$modal+="</div>",a("body").prepend($modal),window.setTimeout(function(){a("#"+f).addClass("md-show"),a(".md-overlay,.md-close").click(function(){a("#"+f).removeClass("md-show"),window.setTimeout(function(){a("#"+f).remove()},500)})},100),!1},notifyError:function(b,c){void 0==c&&(c=b,b=null);var d={text:c,image:"<i class='icon-alert'></i>"};b&&a.extend(d,{title:b}),a.notify(d,a.extend({className:"error"},wms.frame.notifyOptions))},notifyWarning:function(b,c){void 0==c&&(c=b,b=null);var d={text:c,image:"<i class='icon-attention'></i>"};b&&a.extend(d,{title:b}),a.notify(d,a.extend({className:"warning"},wms.frame.notifyOptions))},notifyInfo:function(b,c){void 0==c&&(c=b,b=null);var d={text:c,image:"<i class='icon-info-circled'></i>"};b&&a.extend(d,{title:b}),a.notify(d,a.extend({className:"info"},wms.frame.notifyOptions))},notifySuccess:function(b,c){void 0==c&&(c=b,b=null);var d={text:c,image:"<i class='icon-info-circled'></i>"};b&&a.extend(d,{title:b}),a.notify(d,a.extend({className:"success"},wms.frame.notifyOptions))},blockUIItem:function(b){b=b||"#wrapper",a(b).block({message:'<div class="loading"></div>',css:{border:"none",width:"14px",backgroundColor:"none"},overlayCSS:{backgroundColor:"#fff",opacity:.4,cursor:"wait"}})},unblockUIItem:function(b){b=b||"#wrapper",a(b).unblock()},fullScreen:function(a){a.requestFullscreen?a.requestFullscreen():a.mozRequestFullScreen?a.mozRequestFullScreen():a.webkitRequestFullscreen?a.webkitRequestFullscreen():a.msRequestFullscreen&&a.msRequestFullscreen()},exitFullscreen:function(){document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen()},toggleFullscreen:function(){this.isFullScreenEnabled()&&(this.getFullScreenElement()?this.exitFullscreen():this.fullScreen(document.documentElement))},getFullScreenElement:function(){return document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement},isFullScreenEnabled:function(){return document.fullscreenEnabled||document.mozFullScreenEnabled||document.webkitFullscreenEnabled}};c.addResizeFunc(c.initscrolls).addResizeFunc(c.frameChange),wms.addResource("zh-CN",{"widget-remove-confirm":"确定要移除此组件么？"}),wms.addReadyFunc(function(){console.debug("wfm ready function part..."),a(window).resize(debounce(c.afterResize,100)),a(".open-left").click(function(b){b.stopPropagation(),a("#wrapper").toggleClass("enlarged"),a("#wrapper").addClass("forced"),a("#wrapper").hasClass("enlarged")&&a("body").hasClass("fixed-left")?a("body").removeClass("fixed-left").addClass("fixed-left-void"):!a("#wrapper").hasClass("enlarged")&&a("body").hasClass("fixed-left-void")&&a("body").removeClass("fixed-left-void").addClass("fixed-left"),a("#wrapper").hasClass("enlarged")?a(".left ul").removeAttr("style"):a(".subdrop").siblings("ul:first").show(),c.togglescroll(".slimscrollleft"),a("body").trigger("resize")}),a("#sidebar-menu a").on("click",function(b){a("#wrapper").hasClass("enlarged")||(a(this).parent().hasClass("has_sub")&&b.preventDefault(),a(this).hasClass("subdrop")?a(this).hasClass("subdrop")&&(a(this).removeClass("subdrop"),a(this).next("ul").slideUp(350),a(".pull-right i",a(this).parent()).removeClass("fa-angle-up").addClass("fa-angle-down")):(a("ul",a(this).parents("ul:first")).slideUp(350),a("a",a(this).parents("ul:first")).removeClass("subdrop"),a("#sidebar-menu .pull-right i").removeClass("fa-angle-up").addClass("fa-angle-down"),a(this).next("ul").slideDown(350),a(this).addClass("subdrop"),a(".pull-right i",a(this).parents(".has_sub:last")).removeClass("fa-angle-down").addClass("fa-angle-up"),a(".pull-right i",a(this).siblings("ul")).removeClass("fa-angle-up").addClass("fa-angle-down")))}),a("#sidebar-menu ul li.has_sub a.active").parents("li:last").children("a:first").addClass("active").trigger("click"),a(".widget-header .widget-close").on("click",function(b){b.preventDefault(),$item=a(this).parents(".widget:first"),bootbox.confirm(i18n.t("widget-remove-confirm"),function(b){b===!0&&($item.addClass("animated bounceOutUp"),window.setTimeout(function(){$item.data("is-app")?($item.removeClass("animated bounceOutUp"),$item.hasClass("ui-draggable")&&$item.find(".widget-popout").click(),$item.hide(),a("a[data-app='"+$item.attr("id")+"']").addClass("clickable")):$item.remove()},300))})}),a(document).on("click",".widget-header .widget-toggle",function(b){b.preventDefault(),a(this).toggleClass("closed").parents(".widget:first").find(".widget-content").slideToggle()}),a(document).on("click",".widget-header .widget-popout",function(b){b.preventDefault();var c=a(this).parents(".widget:first");if(c.hasClass("modal-widget"))a("i",this).removeClass("icon-window").addClass("icon-publish"),c.removeAttr("style").removeClass("modal-widget"),c.find(".widget-maximize,.widget-toggle").removeClass("nevershow"),c.draggable("destroy").resizable("destroy");else{c.removeClass("maximized"),c.find(".widget-maximize,.widget-toggle").addClass("nevershow"),a("i",this).removeClass("icon-publish").addClass("icon-window");var d=c.width(),e=c.height();c.addClass("modal-widget").removeAttr("style").width(d).height(e),a(c).draggable({handle:".widget-header",containment:".content-page"}).css({left:c.position().left-2,top:c.position().top-2}).resizable({minHeight:150,minWidth:200})}window.setTimeout(function(){a("body").trigger("resize")},300)}),a("a[data-app]").each(function(){var b=a(this).data("app"),c=a(this).data("status");a("#"+b).data("is-app",!0),"inactive"==c&&(a("#"+b).hide(),a(this).addClass("clickable"))}),a(document).on("click","a[data-app].clickable",function(b){b.preventDefault(),a(this).removeClass("clickable");var c=a(this).data("app");a("#"+c).show(),a("#"+c+" .widget-popout").click(),topd=a("#"+c).offset().top-a(window).scrollTop(),a("#"+c).css({left:"10",top:-(topd-60)+"px"}).addClass("fadeInDown animated"),window.setTimeout(function(){a("#"+c).removeClass("fadeInDown animated")},300)}),a(document).on("click",".widget",function(){a(this).hasClass("modal-widget")&&(a(".modal-widget").css("z-index",5),a(this).css("z-index",6))}),a(document).on("click",".widget .reload",function(b){b.preventDefault();var d=a(this).parents(".widget:first");c.blockUIItem(d),window.setTimeout(function(){c.unblockUIItem(d)},1e3)}),a(document).on("click",".widget-header .widget-maximize",function(b){return b.preventDefault(),a(this).parents(".widget:first").removeAttr("style").toggleClass("maximized"),a("i",this).toggleClass("icon-resize-full-1").toggleClass("icon-resize-small-1"),a(this).parents(".widget:first").find(".widget-toggle").toggleClass("nevershow"),a("body").trigger("resize"),!1}),a(".portlets").sortable({connectWith:".portlets",handle:".widget-header",cancel:".modal-widget",opacity:.5,dropOnEmpty:!0,forcePlaceholderSize:!0,receive:function(){a("body").trigger("resize")}}),a("#fs-switch").click(function(a){a.preventDefault(),c.toggleFullscreen()})});wms.validator={SUCCESS:"validator.SUCCESS",ERROR:"validator.ERROR",options:{custom:{numberex:function(b,c){var d=a(b),e=d.data("numberex"),f=hitch(e)(d.data("min")),g=hitch(e)(d.data("max")),h=integer(d.data("decimal")),i=wms.validator.numberValidator(d.val(),f,g,h);return i.startsWith(wms.validator.SUCCESS)?(i.length>18&&"input"!=c.type&&d.val(i.substring(18)),!0):(a(b).data("numberex-error",i),!1)},custom:function(b,c){if(!a.trim(a(b).val()))return!0;var d=a(b).data("custom").split(" "),e=wms.validator.SUCCESS,f=null;if(!(d.length>0))throw"Incorrect Custom Check";for(var g=0;g<d.length;g++){var h=wms.validator.getValidator(d[g]);null!=h?e=h(b,f):console.log("Definition of validator: "+d[g]+"is not found");var i=wms.validator.chkResult(e);if(null==i)break;i.length>0&&(f=i)}var i=wms.validator.chkResult(e);return null==i?(a(b).data("custom-error",e),!1):(i.length>0&&"input"!=c.type&&a(b).val(i),!0)}},errors:{minlength:"validate-minlength",numberex:"error",custom:"error"}},numberValidator:function(b,c,d,e){var b=a.trim(b);if(!b)return wms.validator.SUCCESS;var f=b.charAt(0);"+"===f||"-"===f?b=b.substring(1):f="",b=b.replace(/^(0(?=\d))+/,"");var g=new RegExp("^\\d+$");if(e?g=new RegExp(e>0?"^\\d+\\.?\\d{0,"+e+"}$":"^\\d+\\.?\\d*$"):e=0,!g.test(b))return i18n.t("validate-invalid-number");b=b.replace(/^\./,"0."),b=b.replace(/\.$/,".0"),b=f+b;var h=float(b);return null!=c&&c>h||null!=d&&h>d?i18n.t("validate-invalid-number-range",{postProcess:"sprintf",sprintf:[c,d]}):e?wms.validator.SUCCESS+"^"+h.toFixed(e):wms.validator.SUCCESS},getValidator:function(a){if(!a)return null;var c="check"+capitaliseFirstLetter(a);return wms.validator[c]?wms.validator[c]:b[c]?b[c]:null},chkResult:function(a){return void 0==a?null:a.startsWith(wms.validator.SUCCESS)?a.length>18?a.substring(18):"":null},getOptions:function(b){b=b||{},a.extend(b,wms.validator.options);for(var c in b.errors)b.errors[c]=i18n.t(b.errors[c]);return b}},wms.form={val:function(b,c){return void 0==c?a(b).val():void a(b).val(c).trigger("change.bs.validator")}};wms.addResource("zh-CN",{"validate-minlength":"输入长度不足","validate-invalid-number":"不是一个合法的数字或精度要求不符合要求","validate-invalid-number-range":"数据超出范围，只能在%s和%s之间"}),wms.addReadyFunc(function(){a('form[data-toggle="form-validator"]').each(function(){var c=a(this),d=b[(c.attr("id")||"")+"Check"];c.validator(wms.validator.getOptions(d)),c.on("postinvalid.bs.validator",function(b){var c=a(b.target),d=c.data("bs.validator.posterrors");a.each(d,function(a,b){wms.frame.notifyError(b)})})})}),this.wms.hbs=this.wms.hbs||{},this.wms.hbs["hbs/menu.hbs"]=Handlebars.template({1:function(a,b,c,d){var e,f,g="function",h=b.helperMissing,i=this.escapeExpression,j="    <li class='has_sub'><a href='javascript:void(0);'><i class='"+i((f=null!=(f=b.icon||(null!=a?a.icon:a))?f:h,typeof f===g?f.call(a,{name:"icon",hash:{},data:d}):f))+"'></i><span>"+i((f=null!=(f=b.name||(null!=a?a.name:a))?f:h,typeof f===g?f.call(a,{name:"name",hash:{},data:d}):f))+'</span> <span class="pull-right"><i class="fa fa-angle-down"></i></span></a>\n        <ul>\n';return e=b.each.call(a,null!=a?a.submenus:a,{name:"each",hash:{},fn:this.program(2,d),inverse:this.noop,data:d}),null!=e&&(j+=e),j+"        </ul>\n    </li>\n"},2:function(a,b,c,d){var e,f="function",g=b.helperMissing,h=this.escapeExpression;return"            <li><a href='"+h((e=null!=(e=b.url||(null!=a?a.url:a))?e:g,typeof e===f?e.call(a,{name:"url",hash:{},data:d}):e))+"' mid='"+h((e=null!=(e=b.menuId||(null!=a?a.menuId:a))?e:g,typeof e===f?e.call(a,{name:"menuId",hash:{},data:d}):e))+"'><span>"+h((e=null!=(e=b.name||(null!=a?a.name:a))?e:g,typeof e===f?e.call(a,{name:"name",hash:{},data:d}):e))+"</span></a></li>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e,f="<ul>\n    <li><a href='index.html' mid=\"000\"><i class='icon-home'></i><span>仪表盘</span></a></li>\n";return e=b.each.call(a,a,{name:"each",hash:{},fn:this.program(1,d),inverse:this.noop,data:d}),null!=e&&(f+=e),f+"</ul>"},useData:!0});wms.frame.menu={loadMenu:function(b){a("#sidebar-menu").html(wms.hbs["hbs/menu.hbs"](b))}};wms.addReadyFunc(function(){})}(jQuery);var _self=this;